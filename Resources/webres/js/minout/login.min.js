let loginUserNameInput=document.querySelector(".formbody .userName input"),loginPwdInput=document.querySelector(".formbody .pwd input"),loginRequestTip=document.querySelector(".requesting"),forgetBtn=document.querySelector(".formbody .forget"),queryUser=document.querySelector(".forget-queryEmail"),queryUserLoadingTip=queryUser.querySelector(".requesting"),queryEmailInput=document.querySelector(".forget-queryEmail .frame .query input"),queryEmailBtn=document.querySelector(".forget-queryEmail .frame .query .queryRequest"),queryEmailList=document.querySelector(".forget-queryEmail .frame .box ul"),queryUserCloseBtn=document.querySelector(".forget-queryEmail .frame .close");document.querySelector(".formbody .ok").addEventListener("click",()=>{let data={userName:loginUserNameInput.value,pwd:loginPwdInput.value},dataString=JSON.stringify(data);loginRequestTip.style.display="flex",fetch("/miyakogame/api/player/login",{method:"POST",body:dataString,headers:{"content-type":"application/json"}}).then(response=>response.json()).then(result=>{result.success?(showTipFrame("登录成功！3s后跳转至游戏界面。",null,".tip-true"),setTimeout(()=>{window.location.pathname="/miyakogame"},3e3)):showTipFrame("登录失败！原因："+result.message,null,".tip-false"),loginRequestTip.style.display="none"})}),forgetBtn.addEventListener("click",()=>{queryUser.style.display="flex"}),queryEmailBtn.addEventListener("click",()=>{queryEmailList.innerHTML="",queryUserLoadingTip.style.display="flex",fetch("/miyakogame/api/player/findbyemail?email="+queryEmailInput.value).then(response=>response.json()).then(result=>{if(result.success)for(let eachPlayer of result.data){let liDOM=document.createElement("li"),imgBox=document.createElement("div");imgBox.className="imgBox";let imgDOM=document.createElement("img");imgDOM.src=eachPlayer.avatar,imgBox.appendChild(imgDOM);let usernameDOM=document.createElement("div");usernameDOM.className="username",usernameDOM.innerText=eachPlayer.userName;let nicknameDOM=document.createElement("div");nicknameDOM.className="nickname",nicknameDOM.innerText=eachPlayer.nickname;let btnDOM=document.createElement("div");btnDOM.className="div-btn",btnDOM.innerText="找回",liDOM.appendChild(imgBox),liDOM.appendChild(usernameDOM),liDOM.appendChild(nicknameDOM),liDOM.appendChild(btnDOM),queryEmailList.appendChild(liDOM)}else showTipFrame("查询失败！原因："+result.message,null,".tip-false");queryUserLoadingTip.style.display="none"})}),queryUserCloseBtn.addEventListener("click",()=>{queryUser.style.display="none",queryEmailList.innerHTML=""}),mouseMoveDropDotControl(!0),mouseClickLineControl(!0);