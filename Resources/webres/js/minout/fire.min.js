let bulletArray=[];function genBulletByWeaponTemplate(weapon){let destObject={};for(let key in weapon){let property=weapon[key];destObject[key]=null==property?null:null==property?void 0:"object"==typeof property?genBulletByWeaponTemplate(property):property}return destObject}function fire(weapon){if(!isLoadingBullet&&(0==currentWeaponIndex||weaponCount[currentWeaponIndex]>0)){isLoadingBullet=!0,setTimeout((function(){isLoadingBullet=!1}),weapon.interval);let bullet=genBulletByWeaponTemplate(weapon);document.querySelector(bullet.soundClassName).play(),bullet.dom=bullet.shooting(miyako.offsetLeft+miyako.offsetWidth,miyako.offsetTop+.3*miyako.offsetHeight),bulletArray.push(bullet),0!=currentWeaponIndex&&(weaponCount[currentWeaponIndex]--,refreshDom())}weaponCount[currentWeaponIndex]}function bulletFlyMainControl(bullets,enemies){for(let i=0;i<bullets.length;i++){let eachBullet=bullets[i],eachBulletDOM=eachBullet.dom;eachBullet.flying(eachBulletDOM);let eachBulletDOMArray=[];"[object Array]"!=Object.prototype.toString.call(eachBulletDOM)?eachBulletDOMArray.push(eachBulletDOM):eachBulletDOMArray=eachBulletDOM;for(let j=0;j<eachBulletDOMArray.length;j++){let getSingleBulletDOM=eachBulletDOMArray[j];for(let k=0;k<enemies.length;k++)if(!enemies[k].isEaten){let criteria1=getSingleBulletDOM.offsetTop+getSingleBulletDOM.offsetHeight>=enemies[k].dom.offsetTop&&getSingleBulletDOM.offsetLeft+getSingleBulletDOM.offsetWidth>=enemies[k].dom.offsetLeft,criteria2=getSingleBulletDOM.offsetTop<=enemies[k].dom.offsetTop+enemies[k].dom.offsetHeight&&getSingleBulletDOM.offsetLeft<=enemies[k].dom.offsetLeft+enemies[k].dom.offsetWidth,criteriaTotal;if(criteria1&&criteria2){eachBullet.hitTrigger(getSingleBulletDOM,enemies[k],enemies),null==getSingleBulletDOM.offsetParent&&eachBulletDOMArray.splice(j,1);break}}null!=getSingleBulletDOM.offsetParent&&(getSingleBulletDOM.offsetLeft+getSingleBulletDOM.offsetWidth>=gameBackground.offsetWidth||getSingleBulletDOM.offsetTop<=0||getSingleBulletDOM.offsetTop+getSingleBulletDOM.offsetHeight>=gameBackground.offsetHeight)&&(getSingleBulletDOM.remove(),eachBulletDOMArray.splice(i,0))}}}function clearBullets(){for(let i=0;i<bulletArray.length;i++)if("[object Array]"!=Object.prototype.toString.call(bulletArray[i].dom))bulletArray[i].dom.remove();else for(let j=0;j<bulletArray[i].dom.length;j++)bulletArray[i].dom[j].remove();bulletArray=[]}