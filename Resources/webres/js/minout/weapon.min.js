let weaponList=[];function Weapon(name,price,texture,interval,soundClassName,shooting,flying,hitTrigger){this.name=name,this.price=price,this.texture=texture,this.interval=interval,this.soundClassName=soundClassName,this.shooting=shooting,this.flying=flying,this.hitTrigger=hitTrigger}let defaultWeapon=new Weapon("常规鬼火",0,"/img/bullets/bullet.png",600,".fireAudio",(x,y)=>{let dom=document.createElement("img");return dom.src=defaultWeapon.texture,dom.style.position="absolute",dom.style.left=x+"px",dom.style.top=y+"px",gameBackground.appendChild(dom),dom},(bulletDOM,emenies)=>{let x=bulletDOM.offsetLeft;x+=8,bulletDOM.style.left=x+"px"},(bulletDOM,enemy,enemies)=>{document.querySelector(".scoreAduio").play(),enemyFadeEffect(enemy),bulletDOM.remove()}),penetrateWildfire=new Weapon("穿透鬼火",15,"/img/bullets/bullet-penetrate.png",1500,".fire-penetrateAudio",(x,y)=>{let dom=document.createElement("img");return dom.src=penetrateWildfire.texture,dom.style.position="absolute",dom.style.left=x+"px",dom.style.top=y+"px",gameBackground.appendChild(dom),dom},(bulletDOM,emenies)=>{let x=bulletDOM.offsetLeft;x+=9,bulletDOM.style.left=x+"px"},(bulletDOM,enemy,enemies)=>{document.querySelector(".scoreAduio").play(),enemyFadeEffect(enemy)}),boomWildfire=new Weapon("爆裂之火",15,"/img/bullets/bullet-boom.gif",1250,".fire-boomAudio",(x,y)=>{let dom=document.createElement("img");return dom.src=boomWildfire.texture,dom.style.position="absolute",dom.style.left=x+"px",dom.style.top=y+"px",gameBackground.appendChild(dom),dom},(bulletDOM,emenies)=>{let x=bulletDOM.offsetLeft;x+=7,bulletDOM.style.left=x+"px"},(bulletDOM,enemy,enemies)=>{document.querySelector(".score-boomAudio").play();const colors=["#ff0f26","#ff7d0f","#ffe72e","#b2ff2e","#3cff2e","#2effd3","#0700ff","#c000ff"];let bulletAtX=bulletDOM.offsetLeft-bulletDOM.offsetWidth/2,bulletAtY=bulletDOM.offsetTop-bulletDOM.offsetHeight/2,radius=1,radiusGrowth=5,color=colors[genRandom(0,colors.length-1)],shockWave=document.createElement("div");shockWave.style.position="absolute",shockWave.style.left=bulletAtX+"px",shockWave.style.top=bulletAtY+"px",shockWave.style.borderColor=color,shockWave.style.borderRadius="50%",shockWave.style.borderStyle="solid",shockWave.style.borderWidth="5px",bulletDOM.remove(),gameBackground.appendChild(shockWave);let keyFrame=42,waveControl=setInterval(()=>{shockWave.style.width=radius+"px",shockWave.style.height=radius+"px",shockWave.style.left=bulletAtX-radius/2+"px",shockWave.style.top=bulletAtY-radius/2+"px",shockWave.offsetLeft+radius+radiusGrowth/2<gameBackground.offsetWidth&&shockWave.offsetTop+radius+radiusGrowth/2<gameBackground.offsetHeight&&(radius+=radiusGrowth);for(let i=0;i<enemies.length;i++)if(!enemies[i].isEaten){let criteria1=shockWave.offsetTop+shockWave.offsetHeight>=enemies[i].dom.offsetTop&&shockWave.offsetLeft+shockWave.offsetWidth>=enemies[i].dom.offsetLeft,criteria2=shockWave.offsetTop<=enemies[i].dom.offsetTop+enemies[i].dom.offsetHeight&&shockWave.offsetLeft<=enemies[i].dom.offsetLeft+enemies[i].dom.offsetWidth,criteriaTotal;criteria1&&criteria2&&enemyFadeEffect(enemies[i])}keyFrame--,keyFrame<=12&&radiusGrowth>0&&radiusGrowth--,keyFrame<=0&&(shockWave.remove(),clearInterval(waveControl))},16)}),scatterMagic=new Weapon("散布式魔法",20,"/img/bullets/scatter-icon.png",2e3,".fire-scatterAudio",(x,y)=>{let doms=[];const colors=["#ff0f26","#ff7d0f","#ffe72e","#b2ff2e","#3cff2e","#2effd3","#0700ff","#c000ff"];let count=8,shootControl=setInterval(()=>{let direction=genRandom(-20,20)/180*Math.PI,startAtY=y+genRandom(-5,5),color=colors[genRandom(0,dotColors.length-1)],eachDot=document.createElement("div");eachDot.style.position="absolute",eachDot.style.width="3px",eachDot.style.height="3px",eachDot.style.borderRadius="50%",eachDot.style.backgroundColor=color,eachDot.style.boxShadow="0px 0px 4px 5px "+color,eachDot.style.left=x+"px",eachDot.style.top=startAtY+"px",eachDot.flydirect=direction,gameBackground.appendChild(eachDot),doms.push(eachDot),count--,count<=0&&clearInterval(shootControl)},60);return doms},(bulletDOM,emenies)=>{for(let i=0;i<bulletDOM.length;i++){let direction=bulletDOM[i].flydirect,v=8,x=bulletDOM[i].offsetLeft,y=bulletDOM[i].offsetTop;x+=Math.cos(direction)*v,y+=Math.sin(direction)*v,bulletDOM[i].style.left=x+"px",bulletDOM[i].style.top=y+"px"}},(bulletDOM,enemy,enemies)=>{document.querySelector(".scoreAduio").play(),enemyFadeEffect(enemy),bulletDOM.remove()}),bounceMagic=new Weapon("弹弹魔法",2,"/img/bullets/bounce-icon.png",300,".fire-bounce-shootAudio",(x,y)=>{let direction=genRandom(-60,60)/180*Math.PI,dom=document.createElement("img");return dom.src="/img/bullets/bounce-"+genRandom(1,2)+".png",dom.style.position="absolute",dom.style.left=x+"px",dom.style.top=y+"px",dom.flydirect=direction,gameBackground.appendChild(dom),dom},(bulletDOM,emenies)=>{let x=bulletDOM.offsetLeft,y=bulletDOM.offsetTop,v=7;(y-7<=0||y+7+bulletDOM.offsetHeight>=gameBackground.offsetHeight)&&(bulletDOM.flydirect=-bulletDOM.flydirect,document.querySelector(".fire-bounce-reflectAudio").play()),x+=7*Math.cos(bulletDOM.flydirect),y+=7*Math.sin(bulletDOM.flydirect),bulletDOM.style.left=x+"px",bulletDOM.style.top=y+"px"},(bulletDOM,enemy,enemies)=>{document.querySelector(".scoreAduio").play(),enemyFadeEffect(enemy),bulletDOM.remove()}),traceBall=new Weapon("追踪光球",10,"/img/bullets/trace.png",600,".fire-traceAudio",(x,y)=>{},(bulletDOM,emenies)=>{},(bulletDOM,enemy,enemies)=>{});weaponList.push(defaultWeapon),weaponList.push(penetrateWildfire),weaponList.push(boomWildfire),weaponList.push(scatterMagic),weaponList.push(bounceMagic),weaponList.push(traceBall);