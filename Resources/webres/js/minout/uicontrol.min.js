let currentScoreDom=document.querySelector(".game .topBar .scorePanel .currentScore"),highScoreDom=document.querySelector(".game .topBar .scorePanel .highScore"),levelDom=document.querySelector(".game .topBar .level"),healthDom=document.querySelector(".game .topBar .health .t"),weaponDom=document.querySelector(".game .topBar .weapon"),gameBackground=document.querySelector(".game .gameBg"),gameTopBar=document.querySelector(".game .topBar"),succeedPage=document.querySelector(".succeed"),failedPage=document.querySelector(".failed"),startPage=document.querySelector(".start"),pausePage=document.querySelector(".pause"),loadingPage=document.querySelector(".loading"),transitionPage=document.querySelector(".transition"),processBar=document.querySelector(".loading .processBar .processValue"),processNum=document.querySelector(".loading .processNum"),notSupportPage=document.querySelector(".notsupport"),helpPage=document.querySelector(".help"),startPageBtn=document.querySelector(".start ul").children;function operateStartPage(isVisible){if(isVisible)startPage.children[0].style.display="flex",startPage.children[1].style.display="inline",startPage.style.borderRight="none",startPage.style.width="100%",readData()||health<0?(startPageBtn[0].style.color="gray",startPageBtn[0].removeEventListener("click",continueGame)):(startPageBtn[0].style.color="#ff5500",startPageBtn[0].addEventListener("click",continueGame)),startPage.style.display="flex";else{let totalMagnification=3570,pageWidth=startPage.offsetWidth,eachMove=pageWidth/totalMagnification,startRate=119,keyFrame=60;startPage.style.borderRight="5px solid #014dff";let fadeControl=setInterval(()=>{pageWidth-=startRate*eachMove,startPage.style.width=pageWidth+"px",startRate-=2,keyFrame--,40==keyFrame&&(startPage.children[0].style.display="none",startPage.children[1].style.display="none"),keyFrame<=0&&(startPage.style.display="none",clearInterval(fadeControl))},16)}}function operateTopBarContent(isVisible){if(isVisible)for(let i=0;i<gameTopBar.children.length;i++)gameTopBar.children[i].style.display="flex";else for(let i=0;i<gameTopBar.children.length;i++)gameTopBar.children[i].style.display="none"}function operateLoadingPage(isVisible){loadingPage.style.display=isVisible?"flex":"none"}function setLoadingBar(value){let originValue=processNum.innerHTML.substring(8,processNum.innerHTML.indexOf("%")),distance=value-parseFloat(originValue);if(distance>0){let section,sectionValue=distance/169,eachLoadSection=25,loadInterval=setInterval((function(){originValue=parseFloat(originValue)+eachLoadSection*sectionValue,processBar.style.width=originValue+"%",processNum.innerHTML="process "+originValue.toFixed(2)+"%",eachLoadSection-=2,eachLoadSection<0&&clearInterval(loadInterval)}),16)}}function operateNotSupportPage(isVisible,msg){isVisible?(notSupportPage.style.display="flex",notSupportPage.children[1].innerHTML=msg):notSupportPage.style.display="none"}function opreateFailedPage(isVisible){isVisible?(failedPage.style.display="flex",document.querySelector(".failedAudio-"+genRandom(1,3)).play()):failedPage.style.display="none"}function operateSuccessPage(isVisible){isVisible?(succeedPage.style.display="flex",document.querySelector(".succeedAduio-"+genRandom(1,2)).play()):succeedPage.style.display="none"}function operatePausePage(isVisible){pausePage.style.display=isVisible?"flex":"none"}function opreateHelpPage(isVisible){helpPage.style.display=isVisible?"block":"none"}function enemyFadeEffect(enemyObject){enemyObject.isEaten=!0,addScore(enemyObject.score);let currentKeyFrame=20,totalKeyFrame=currentKeyFrame,sizeRatio=1,deg=0,effectControl=setInterval(()=>{enemyObject.dom.style.transform="scale("+sizeRatio.toFixed(2)+") rotate("+deg+"deg)",sizeRatio-=1/totalKeyFrame,deg+=90/totalKeyFrame,currentKeyFrame--,currentKeyFrame<=0&&(enemyObject.dom.style.display="none",clearInterval(effectControl))},16)}