window.addEventListener("keydown",e=>{if(isPaused||(38!=e.keyCode&&87!=e.keyCode||up(miyakoMoveRatio),40!=e.keyCode&&83!=e.keyCode||down(miyakoMoveRatio),32==e.keyCode&&fire(weaponList[currentWeaponIndex]),69==e.keyCode&&(currentWeaponIndex++,currentWeaponIndex>=weaponList.length&&(currentWeaponIndex=0),refreshDom(),showTipFrame("已切换至武器："+weaponList[currentWeaponIndex].name,weaponList[currentWeaponIndex].texture,".tip-true")),81==e.keyCode&&(currentWeaponIndex--,currentWeaponIndex<0&&(currentWeaponIndex=weaponList.length-1),refreshDom(),showTipFrame("已切换至武器："+weaponList[currentWeaponIndex].name,weaponList[currentWeaponIndex].texture,".tip-true")),90==e.keyCode&&(currentPropsIndex--,currentPropsIndex<0&&(currentPropsIndex=propsList.length-1),refreshDom(),showTipFrame("已切换至道具："+propsList[currentPropsIndex].name,propsList[currentPropsIndex].img,".tip-true")),67==e.keyCode&&(currentPropsIndex++,currentPropsIndex>=propsList.length&&(currentPropsIndex=0),refreshDom(),showTipFrame("已切换至道具："+propsList[currentPropsIndex].name,propsList[currentPropsIndex].img,".tip-true")),86==e.keyCode&&(propsCount[currentPropsIndex]<=0?showTipFrame("该道具数量不足！",propsList[currentPropsIndex].img,".tip-false"):(document.querySelector(propsList[currentPropsIndex].soundClassName).play(),propsList[currentPropsIndex].effect(miyako,puddingArray),propsCount[currentPropsIndex]--,refreshDom(),showTipFrame("已使用道具："+propsList[currentPropsIndex].name,propsList[currentPropsIndex].img,propsList[currentPropsIndex].soundClassName)))),80==e.keyCode){let isStartPageOn="none"!=window.getComputedStyle(startPage,null).getPropertyValue("display"),isSucceedPageOn="none"!=window.getComputedStyle(succeedPage,null).getPropertyValue("display"),isFailedPageOn="none"!=window.getComputedStyle(failedPage,null).getPropertyValue("display"),isOutofGame;isStartPageOn||isSucceedPageOn||isFailedPageOn||(isPaused?(startGameProcess(),isPaused=!1,operatePausePage(!1)):(stopGameProcess(),isPaused=!0,operatePausePage(!0)))}}),startPageBtn[1].addEventListener("click",()=>{newGameTipFrame.style.display="flex"}),newgameTipBtn[0].addEventListener("click",()=>{newGameTipFrame.style.display="none",resetData(),clearBullets(),document.querySelector(".startAudio").play(),operateStartPage(!1),initializePuddings(),startGameProcess()}),newgameTipBtn[1].addEventListener("click",()=>{newGameTipFrame.style.display="none"}),startPageBtn[2].addEventListener("click",()=>{operateShopPage(!0)}),startPageBtn[3].addEventListener("click",()=>{operateRankPage(!0)}),startPageBtn[4].addEventListener("click",()=>{opreateHelpPage(!0)});let succeedPageBtn=document.querySelector(".succeed ul").children;succeedPageBtn[0].addEventListener("click",()=>{clearBullets(),operateSuccessPage(!1),initializePuddings(),startGameProcess()}),succeedPageBtn[1].addEventListener("click",()=>{operateSuccessPage(!1),operateStartPage(!0)});let failedPageBtn=document.querySelector(".failed ul").children;failedPageBtn[0].addEventListener("click",()=>{clearBullets(),opreateFailedPage(!1),initializePuddings(),startGameProcess()}),failedPageBtn[1].addEventListener("click",()=>{opreateFailedPage(!1),operateStartPage(!0)}),rankPage.children[1].lastElementChild.addEventListener("click",()=>{operateRankPage(!1)}),helpPage.children[0].lastElementChild.addEventListener("click",()=>{opreateHelpPage(!1)});let shopBtn=shopPage.children[0].lastElementChild;shopBtn.children[0].addEventListener("click",()=>{buyItems()}),shopBtn.children[1].addEventListener("click",()=>{operateShopPage(!1)});let loginBtn=document.querySelector(".start .userInfo .login"),regBtn=document.querySelector(".start .userInfo .register"),userBtn=document.querySelector(".start .userInfo .player");if(null!=loginBtn&&null!=regBtn&&(loginBtn.addEventListener("click",()=>{window.location.pathname="/miyakogame/player/login"}),regBtn.addEventListener("click",()=>{window.location.pathname="/miyakogame/player/register"})),null!=userBtn){let userPanelDOM=document.querySelector(".start .userInfo .userPanel"),pointerDOM=document.querySelector(".start .userInfo .player .pointer"),eachListBtn=document.querySelector(".start .userInfo .userPanel .userPanelList").children;userBtn.addEventListener("mouseenter",()=>{mouseMoveDropDotControl(!1),mouseClickLineControl(!1),pointerDOM.style.transform="rotate(180deg)",userPanelDOM.style.display="flex"}),userPanelDOM.addEventListener("mouseleave",()=>{mouseMoveDropDotControl(!0),mouseClickLineControl(!0),pointerDOM.style.transform="rotate(0deg)",userPanelDOM.style.display="none"}),eachListBtn[0].addEventListener("click",()=>{operateUserInfoUpdatePage(!0)}),eachListBtn[1].addEventListener("click",()=>{fetch("/miyakogame/api/player/logout"),showTipFrame("已登出！3s后刷新页面...",null,".tip-true"),setTimeout(()=>{window.location.pathname="/miyakogame"},3e3)})}