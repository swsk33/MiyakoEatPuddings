<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="swsk33.game.miyakoeatpuddings.dao">
	<resultMap id="playerResultMap"
		type="swsk33.game.miyakoeatpuddings.dataobject.PlayerDO">
		<id column="user_name" property="userName" />
		<result column="nickname" property="nickname" />
		<result column="avatar" property="avatar" />
		<result column="high_score" property="highScore" />
		<result column="pwd" property="pwd" />
		<result column="game_data" property="gameData" />
		<result column="gmt_created" property="gmtCreated" />
		<result column="gmt_modified" property="gmtModified" />
	</resultMap>

	<insert id="add"
		parameterType="swsk33.game.miyakoeatpuddings.dataobject.PlayerDO">
		insert into `miyakogame_user`
		(user_name, nickname,
		avatar, high_score, pwd, game_data, gmt_created, gmt_modified)
		values
		(#{userName}, #{nickname}, #{avatar}, #{highScore}, #{pwd},
		#{gameData}, now(), now())
	</insert>

	<delete id="delete">
		delete from `miyakogame_user` where
		user_name=#{userName}
	</delete>

	<update id="update"
		parameterType="swsk33.game.miyakoeatpuddings.dataobject.PlayerDO">
		update `miyakogame_user` set nickname=#{nickname},
		avatar=#{avatar}, high_score=#{highScore}, pwd=#{pwd},
		game_data=#{gameData}, gmt_modified=now() where user_name=#{userName}
	</update>

	<select id="findByUserName" resultMap="playerResultMap">
		select * from
		`miyakogame_user` where user_name=#{userName}
	</select>

	<select id="findByHighScoreInTen" resultMap="playerResultMap">
		select * from
		`miyakogame_user` order by high_score desc limit 10
	</select>

</mapper>